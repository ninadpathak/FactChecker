<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FactChecker 2.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- API Keys Dropdown -->
    <div class="api-dropdown">
        <button id="api-toggle" class="api-toggle-btn" title="API Keys">
            <i class="fas fa-key"></i>
        </button>
        <div id="api-panel" class="api-panel hidden">
            <div class="input-group">
                <input type="password" id="openai-key" placeholder=" " autocomplete="off">
                <label for="openai-key">OpenAI API Key</label>
            </div>
            <button id="save-keys-btn" class="btn-save">Save Keys</button>
        </div>
    </div>

    <div class="container">
        <header>
            <div class="logo-icon">
                <i class="fa-solid fa-shield-halved"></i>
            </div>
            <h1>FactChecker 2.0</h1>
            <p>Paste text to verify facts and check link accuracy</p>
        </header>

        <!-- Main Content: Adaptive Layout -->
        <div class="main-content initial" id="main-layout">
            <!-- Left Side: Text Input -->
            <section class="text-input">
                <div class="sample-buttons">
                    <button class="btn-sample" data-sample="1">Sample Text 1</button>
                    <button class="btn-sample" data-sample="2">Sample Text 2</button>
                </div>
                <div class="input-group">
                    <textarea id="input-text" placeholder=" " rows="15"></textarea>
                    <label for="input-text">Paste your text here</label>
                </div>
                <button id="process-btn" class="btn-primary">Process Text</button>
            </section>

            <!-- Right Side: Links Verification Table -->
            <section id="links-section" class="links-verification hidden">
                <div id="links-output"></div>
                <button id="verify-btn" class="btn-primary hidden">Check Links</button>
            </section>
        </div>

        <!-- FAQ / About Section -->
        <section class="info-card faq-section">
            <h2>FAQ</h2>
            <div class="faq-list">
                <details class="faq-item">
                    <summary>What does FactChecker 2.0 do?</summary>
                    <p>It extracts links from your text, classifies each link as a citation or a regular link, then verifies citations against on‑page content and checks link health and relevance.</p>
                </details>
                <details class="faq-item">
                    <summary>How are my API keys handled?</summary>
                    <p>Keys are stored locally in your browser’s <code>localStorage</code> and are only used to call the official OpenAI and Perplexity APIs. They are never sent to any third‑party server.</p>
                </details>
                <details class="faq-item">
                    <summary>What counts as a citation vs a regular link?</summary>
                    <p>Citations are links used to support specific facts, numbers, or research claims. Regular links are general references or further reading.</p>
                </details>
                <details class="faq-item">
                    <summary>Why do some pages show “Content unavailable”?</summary>
                    <p>Some sites block cross‑origin requests. When direct fetching fails, the app falls back to Perplexity for context to judge plausibility.</p>
                </details>
                <details class="faq-item">
                    <summary>How strict is verification?</summary>
                    <p>When content is fetched, a citation is marked Verified only if the tool can match an exact on‑page quote for the claimed fact. If a figure (like 79%) appears in your context, it must also appear in the quote.</p>
                </details>
                <details class="faq-item">
                    <summary>Cost and performance?</summary>
                    <p>Calls use small OpenAI models for classification and analysis and Perplexity for fallback search. Typical cost per article is low; parallel fetch/verify keeps things responsive.</p>
                </details>
            </div>
        </section>
    
        <!-- Footer -->
        <footer class="site-footer">
            <div class="footer-inner">
                <span>Made by <a href="https://ninadpathak.com" target="_blank" rel="noopener noreferrer">Ninad Pathak</a></span>
                <span class="dot">•</span>
                <a href="https://github.com/ninadpathak/FactChecker" target="_blank" rel="noopener noreferrer">GitHub</a>
                <span class="dot">•</span>
                <a href="#" id="scroll-top">Back to top</a>
            </div>
        </footer>
    </div>

    <!-- Load Turndown library for HTML to Markdown conversion -->
    <script src="https://unpkg.com/turndown/dist/turndown.js"></script>

    <!-- Load our modules -->
    <script src="js/markdown-converter.js"></script>
    <script src="js/link-extractor.js"></script>
    <script src="js/agent-manager.js"></script>
    <script src="js/ui-renderer.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Simple back-to-top link
        document.addEventListener('DOMContentLoaded', function () {
            const topLink = document.getElementById('scroll-top');
            if (topLink) {
                topLink.addEventListener('click', function (e) {
                    e.preventDefault();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
        });
    </script>
</body>
</html>
