<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FactChecker 2.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- API Keys Dropdown -->
    <div class="api-dropdown">
        <button id="api-toggle" class="api-toggle-btn" title="API Keys">
            <i class="fas fa-key"></i>
        </button>
        <div id="api-panel" class="api-panel hidden">
            <div class="input-group">
                <input type="password" id="openai-key" placeholder=" " autocomplete="off">
                <label for="openai-key">OpenAI API Key</label>
            </div>
            <p class="keys-note">Add your <strong>OpenAI API Key</strong> to use the fact-checking service. Your key is stored locally in your browser and never sent to third-party servers.</p>
            <button id="save-keys-btn" class="btn-save">Save Keys</button>
        </div>
    </div>

    <div class="container">
        <!-- Hero Section -->
        <section class="hero-section">
            <header class="hero">
                <div class="logo-icon">
                    <i class="fa-solid fa-shield-halved"></i>
                </div>
                <h1>FactChecker 2.0</h1>
                <p class="hero-subtitle">Verify citations and check link accuracy with AI-powered analysis</p>
            </header>

            <!-- Main Content: Adaptive Layout -->
            <div class="main-content initial" id="main-layout">
                <!-- Left Side: Text Input -->
                <section class="text-input">
                    <div class="input-group">
                        <textarea id="input-text" placeholder=" " rows="6"></textarea>
                        <label for="input-text">Paste your text here</label>
                    </div>
                    <div class="button-row">
                        <div class="sample-buttons">
                            <button class="btn-sample" data-sample="1">Sample Text 1</button>
                            <button class="btn-sample" data-sample="2">Sample Text 2</button>
                        </div>
                        <button id="process-btn" class="btn-primary">Extract Links</button>
                    </div>

                    <!-- Trust Indicators -->
                    <div class="trust-indicators">
                        <div class="trust-item">
                            <i class="fas fa-shield-alt"></i>
                            <span>Privacy First</span>
                        </div>
                        <div class="trust-item">
                            <i class="fas fa-laptop"></i>
                            <span>Browser Only</span>
                        </div>
                        <div class="trust-item">
                            <i class="fas fa-eye-slash"></i>
                            <span>No Tracking</span>
                        </div>
                    </div>
                </section>

                <!-- Right Side: Links Verification Table -->
                <section id="links-section" class="links-verification hidden">
                    <div id="links-output"></div>
                    <button id="verify-btn" class="btn-primary hidden">Check Links</button>
                </section>
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="how-it-works">
            <h2>How It Works</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-icon"><i class="fas fa-paste"></i></div>
                    <h3>Paste Your Text</h3>
                    <p>Paste any article, blog post, or document with links and citations</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-icon"><i class="fas fa-brain"></i></div>
                    <h3>AI Classification</h3>
                    <p>Our AI identifies citations vs regular links using context analysis</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-icon"><i class="fas fa-check-circle"></i></div>
                    <h3>Get Results</h3>
                    <p>See verification status with detailed explanations for each link</p>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats-section">
            <div class="stat-card">
                <div class="stat-number">20+</div>
                <div class="stat-label">Links Processed</div>
                <div class="stat-description">in under 30 seconds</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">10x</div>
                <div class="stat-label">Parallel Fetching</div>
                <div class="stat-description">for maximum speed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label">Browser-Based</div>
                <div class="stat-description">no server storage</div>
            </div>
        </section>

        <!-- FAQ / About Section -->
        <section class="info-card faq-section">
            <h2>FAQ</h2>
            <div class="faq-list">
                <details class="faq-item">
                    <summary>What does FactChecker 2.0 do?</summary>
                    <p>It extracts links from your text, classifies each link as a citation or a regular link, then verifies citations against on‑page content and checks link health and relevance.</p>
                </details>
                <details class="faq-item">
                    <summary>How are my API keys handled?</summary>
                    <p>Keys are stored locally in your browser’s <code>localStorage</code> and are only used to call the official OpenAI and Perplexity APIs. They are never sent to any third‑party server.</p>
                </details>
                <details class="faq-item">
                    <summary>What counts as a citation vs a regular link?</summary>
                    <p>Citations are links used to support specific facts, numbers, or research claims. Regular links are general references or further reading.</p>
                </details>
                <details class="faq-item">
                    <summary>Why do some pages show “Content unavailable”?</summary>
                    <p>Some sites block cross‑origin requests. When direct fetching fails, the app falls back to Perplexity for context to judge plausibility.</p>
                </details>
                <details class="faq-item">
                    <summary>How strict is verification?</summary>
                    <p>When content is fetched, a citation is marked Verified only if the tool can match an exact on‑page quote for the claimed fact. If a figure (like 79%) appears in your context, it must also appear in the quote.</p>
                </details>
                <details class="faq-item">
                    <summary>Cost and performance?</summary>
                    <p>Calls use small OpenAI models for classification and analysis and Perplexity for fallback search. Typical cost per article is low; parallel fetch/verify keeps things responsive.</p>
                </details>
            </div>
        </section>
    
        <!-- Footer -->
        <footer class="site-footer">
            <div class="footer-inner">
                <span>Made by <a href="https://ninadpathak.com" target="_blank" rel="noopener noreferrer">Ninad Pathak</a></span>
                <span class="dot">•</span>
                <a href="https://github.com/ninadpathak/FactChecker" target="_blank" rel="noopener noreferrer">GitHub</a>
                <span class="dot">•</span>
                <a href="#" id="scroll-top">Back to top</a>
            </div>
        </footer>
    </div>

    <!-- Load Turndown library for HTML to Markdown conversion -->
    <script src="https://unpkg.com/turndown/dist/turndown.js"></script>

    <!-- Load our modules -->
    <script src="js/markdown-converter.js"></script>
    <script src="js/link-extractor.js"></script>
    <script src="js/agent-manager.js"></script>
    <script src="js/ui-renderer.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Simple back-to-top link
        document.addEventListener('DOMContentLoaded', function () {
            const topLink = document.getElementById('scroll-top');
            if (topLink) {
                topLink.addEventListener('click', function (e) {
                    e.preventDefault();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
        });
    </script>
</body>
</html>
